git automatic mirroring implementation plan
===========================================

git mirror-list implementation steps
------------------------------------

* mechanism for making 'push objects'

- `git tag --push [ -p prior_tag ] [ --refs=... ]`

* `git mirror server list`
+
- design for mirror list storage
- design for auth configuration
- automatic signing configuration

* git-daemon support
+
- daemon.c changes - add entry for mirror-list

* `git mirror list` (client)
+
- design for storing `auth' information and keys, prompting for
  confirmation of updates
- fetching keys from keyservers

* extensions to `git fetch`
+
- invokes `git mirror list`
- `fetch` has implicit `refs/pushes/local:refs/pushes/origin` if
   `mirror-list` succeeded
- signature verification, push object ordering on `refs/pushes/origin`
   updating

* `git fetch --use-mirror`
+
- fetch all unknown 'push objects'
- find latest one with correct signature
- initiate fetch of _real_ wanted objects


git mirror notify implementation steps
--------------------------------------

* `git mirror server notify` handler
+
- uses `git fetch --use-mirror` in a dry-run mode to check the mirror

* git-daemon support
+
- daemon.c changes - add entry for mirror-notify

* `git mirror notify` (client)
+
- uses above


git mirror-sync implementation steps
------------------------------------

* pre-requisites
+
- check `mirror-list` state contains enough to know what a peer needs
  to do
- functions for sorting 'push objects' may need revising

* `git mirror sync` event-driven program
+
- design local-repository-mediated `IPC' layout for state of
  `git mirror sync` operation

* download spreading stuff
+
- functions for generating bundle manifests from 'push objects' (the
  'CommitReel object list' from GTP)
- storing bundle manifest indexes (the 'CommitReel index' from GTP)
- functions for generating fragment boundaries from 'push objects' and
  block size
- add fragments messages to `git mirror sync` event driven program

* hook into `git fetch`
- glue option: `git fetch --mirror`

